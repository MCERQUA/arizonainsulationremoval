---
// Comprehensive Schema Markup Component for AI/Snippet Optimization
export interface Props {
  type: 'organization' | 'service' | 'faq' | 'howto' | 'breadcrumb' | 'article' | 'webpage';
  data?: any;
}

const { type, data = {} } = Astro.props;

// Main Organization Schema (for homepage)
const organizationSchema = {
  "@context": "https://schema.org",
  "@type": "InsuranceAgency",
  "@id": "https://heavycraneinsurance.com/#organization",
  "name": "Heavy Crane Insurance",
  "alternateName": "Heavy Crane Insurance - A Division of Contractors Choice Agency",
  "url": "https://heavycraneinsurance.com",
  "logo": "https://heavycraneinsurance.com/logo.png",
  "image": "https://heavycraneinsurance.com/images/hero/crane-truck-hero.jpg",
  "description": "Specialized crane insurance provider offering $1M-$10M+ coverage limits with A+ rated carriers. Expert coverage for mobile cranes, tower cranes, riggers liability, and equipment physical damage.",
  "telephone": "+1-844-967-5247",
  "email": "info@contractorschoiceagency.com",
  "address": {
    "@type": "PostalAddress",
    "streetAddress": "12220 E Riggs Rd",
    "addressLocality": "Chandler",
    "addressRegion": "AZ",
    "postalCode": "85249",
    "addressCountry": "US"
  },
  "geo": {
    "@type": "GeoCoordinates",
    "latitude": 33.2829,
    "longitude": -111.6544
  },
  "openingHoursSpecification": {
    "@type": "OpeningHoursSpecification",
    "dayOfWeek": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"],
    "opens": "09:00",
    "closes": "17:00",
    "timeZone": "America/Phoenix"
  },
  "areaServed": {
    "@type": "Country",
    "name": "United States"
  },
  "priceRange": "$$$",
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": "4.9",
    "reviewCount": "847",
    "bestRating": "5",
    "worstRating": "1"
  },
  "hasOfferCatalog": {
    "@type": "OfferCatalog",
    "name": "Crane Insurance Coverage Types",
    "itemListElement": [
      {
        "@type": "Offer",
        "itemOffered": {
          "@type": "Service",
          "name": "General Liability Insurance",
          "description": "Comprehensive third-party protection with $1M-$10M+ limits, defense costs outside limits, and blanket additional insured coverage.",
          "provider": {
            "@type": "InsuranceAgency",
            "name": "Heavy Crane Insurance"
          }
        }
      },
      {
        "@type": "Offer",
        "itemOffered": {
          "@type": "Service",
          "name": "Riggers Liability (On the Hook)",
          "description": "Specialized care, custody & control coverage for property being lifted, including transit protection and boom damage coverage.",
          "provider": {
            "@type": "InsuranceAgency",
            "name": "Heavy Crane Insurance"
          }
        }
      },
      {
        "@type": "Offer",
        "itemOffered": {
          "@type": "Service",
          "name": "Equipment Physical Damage",
          "description": "All-risk protection including upset, overturn, boom damage, and wire rope failure with rental reimbursement options.",
          "provider": {
            "@type": "InsuranceAgency",
            "name": "Heavy Crane Insurance"
          }
        }
      }
    ]
  },
  "sameAs": [
    "https://www.contractorschoiceagency.com",
    "https://www.facebook.com/contractorschoiceagency",
    "https://www.linkedin.com/company/contractors-choice-agency"
  ],
  "memberOf": {
    "@type": "Organization",
    "name": "Contractors Choice Agency"
  },
  "foundingDate": "2005",
  "taxID": "8608479",
  "legalName": "Contractors Choice Agency LLC"
};

// Comprehensive Service Schema (targets AI understanding)
const serviceSchema = {
  "@context": "https://schema.org",
  "@type": "Service",
  "@id": "https://heavycraneinsurance.com/#service",
  "serviceType": "Crane Insurance",
  "provider": {
    "@id": "https://heavycraneinsurance.com/#organization"
  },
  "name": "Comprehensive Crane Insurance Coverage",
  "description": "Specialized insurance for crane operations including general liability, riggers liability, and equipment physical damage with coverage limits from $1M to $10M+",
  "offers": {
    "@type": "AggregateOffer",
    "priceCurrency": "USD",
    "offerCount": "4",
    "offers": [
      {
        "@type": "Offer",
        "name": "General Liability",
        "priceSpecification": {
          "@type": "PriceSpecification",
          "price": "$1M-$10M+ per occurrence",
          "priceCurrency": "USD"
        }
      },
      {
        "@type": "Offer",
        "name": "Riggers Liability",
        "priceSpecification": {
          "@type": "PriceSpecification",
          "price": "$250K-$5M+ per occurrence",
          "priceCurrency": "USD"
        }
      },
      {
        "@type": "Offer",
        "name": "Equipment Physical Damage",
        "priceSpecification": {
          "@type": "PriceSpecification",
          "price": "1-3% of equipment value annually",
          "priceCurrency": "USD"
        }
      }
    ]
  },
  "serviceArea": {
    "@type": "Country",
    "name": "United States"
  },
  "hoursAvailable": {
    "@type": "OpeningHoursSpecification",
    "dayOfWeek": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"],
    "opens": "09:00",
    "closes": "17:00"
  }
};

// Enhanced FAQ Schema for AI extraction and featured snippets
const faqSchema = {
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "@id": "https://heavycraneinsurance.com/#faq",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "What types of crane insurance coverage do I need?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Crane operators typically need four essential types of coverage: 1) General Liability Insurance ($1M to $10M+ limits) for third-party bodily injury and property damage, 2) Riggers Liability Coverage for property 'on the hook' during lifting operations, 3) Equipment Physical Damage (1-3% of equipment value annually) protecting your crane investment, and 4) Workers' Compensation for employee protection (required in all states except Texas)."
      }
    },
    {
      "@type": "Question",
      "name": "How much does crane insurance cost?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Crane insurance costs vary based on equipment value, operations type, and coverage limits. Equipment Physical Damage typically costs 1-3% of equipment value annually. For example, a $1 million crane might have a $20,000 annual premium at 2%. General liability premiums depend on gross receipts and can range from $5,000 to $50,000+ annually. Factors affecting cost include equipment age, operating territory, claims history, safety programs, and types of lifting operations."
      }
    },
    {
      "@type": "Question",
      "name": "What is riggers liability insurance?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Riggers liability insurance is specialized coverage protecting property of others while it's 'on the hook' during lifting operations. It covers care, custody & control exposures that general liability excludes. This includes coverage for HVAC equipment, generators, telecom equipment, industrial machinery, and any valuable property being lifted. Coverage applies from rigging attachment to final placement."
      }
    },
    {
      "@type": "Question",
      "name": "Do I need special insurance for different types of cranes?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "While core coverage types remain consistent, different crane types have unique risk profiles requiring specialized considerations. Mobile cranes need auto liability for highway travel, tower cranes require weather-related coverage and dismantling protection, crawler cranes need ground damage coverage, and overhead cranes focus on facility damage protection. Each type may have different premium rates and coverage requirements."
      }
    },
    {
      "@type": "Question",
      "name": "What are the insurance requirements for crane operators?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "OSHA 29 CFR 1926.1427 Subpart CC requires certified operators, daily inspections, and proper safety protocols. Insurance requirements include general liability (typically $1M minimum), auto liability for mobile equipment, workers' compensation (except Texas), and often riggers liability. Many contracts require $2M-$5M limits with additional insured endorsements. 16 states have additional licensing requirements beyond federal standards."
      }
    }
  ]
};

// HowTo Schema for process-based content (great for AI assistants)
const howToSchema = {
  "@context": "https://schema.org",
  "@type": "HowTo",
  "@id": "https://heavycraneinsurance.com/#howto-get-crane-insurance",
  "name": "How to Get Crane Insurance Coverage",
  "description": "Step-by-step guide to obtaining comprehensive crane insurance coverage for your operations",
  "image": "https://heavycraneinsurance.com/images/hero/crane-truck-hero.jpg",
  "totalTime": "PT24H",
  "estimatedCost": {
    "@type": "MonetaryAmount",
    "currency": "USD",
    "value": "5000-50000"
  },
  "supply": [
    {
      "@type": "HowToSupply",
      "name": "Business information"
    },
    {
      "@type": "HowToSupply",
      "name": "Equipment list with values"
    },
    {
      "@type": "HowToSupply",
      "name": "Loss history (5 years)"
    },
    {
      "@type": "HowToSupply",
      "name": "Safety program documentation"
    }
  ],
  "step": [
    {
      "@type": "HowToStep",
      "name": "Gather Required Information",
      "text": "Collect your business details, equipment list with serial numbers and values, 5-year loss history, and safety program documentation.",
      "image": "https://heavycraneinsurance.com/images/step-1.jpg"
    },
    {
      "@type": "HowToStep",
      "name": "Submit Quote Request",
      "text": "Complete our online form or call 844-967-5247 to submit your information. Include details about your operations, equipment types, and typical lifting operations.",
      "url": "https://heavycraneinsurance.com/#contact-form"
    },
    {
      "@type": "HowToStep",
      "name": "Review Coverage Options",
      "text": "Our specialists will present coverage options including general liability ($1M-$10M+), riggers liability, equipment physical damage, and specialized endorsements.",
      "image": "https://heavycraneinsurance.com/images/step-3.jpg"
    },
    {
      "@type": "HowToStep",
      "name": "Bind Coverage",
      "text": "Once you select coverage, we'll bind your policy immediately. You'll receive certificates of insurance within 24 hours for your contracts.",
      "image": "https://heavycraneinsurance.com/images/step-4.jpg"
    }
  ]
};

// BreadcrumbList for better navigation understanding
const breadcrumbSchema = {
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "@id": "https://heavycraneinsurance.com/#breadcrumb",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https://heavycraneinsurance.com"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": data.breadcrumb?.current || "Services",
      "item": data.breadcrumb?.url || "https://heavycraneinsurance.com/services"
    }
  ]
};

// WebPage schema for better page understanding
const webPageSchema = {
  "@context": "https://schema.org",
  "@type": "WebPage",
  "@id": data.url || "https://heavycraneinsurance.com/#webpage",
  "url": data.url || "https://heavycraneinsurance.com",
  "name": data.title || "Heavy Crane Insurance - Professional Coverage Solutions",
  "isPartOf": {
    "@id": "https://heavycraneinsurance.com/#website"
  },
  "primaryImageOfPage": {
    "@id": "https://heavycraneinsurance.com/#primaryimage"
  },
  "datePublished": data.datePublished || "2024-01-01",
  "dateModified": data.dateModified || new Date().toISOString(),
  "description": data.description || "Specialized crane insurance with $1M-$10M+ coverage limits from A+ rated carriers",
  "breadcrumb": {
    "@id": "https://heavycraneinsurance.com/#breadcrumb"
  },
  "inLanguage": "en-US",
  "potentialAction": [
    {
      "@type": "ReadAction",
      "target": ["https://heavycraneinsurance.com"]
    }
  ]
};

// Website schema for site-wide understanding
const websiteSchema = {
  "@context": "https://schema.org",
  "@type": "WebSite",
  "@id": "https://heavycraneinsurance.com/#website",
  "url": "https://heavycraneinsurance.com",
  "name": "Heavy Crane Insurance",
  "description": "Specialized crane insurance provider",
  "publisher": {
    "@id": "https://heavycraneinsurance.com/#organization"
  },
  "inLanguage": "en-US",
  "potentialAction": {
    "@type": "SearchAction",
    "target": {
      "@type": "EntryPoint",
      "urlTemplate": "https://heavycraneinsurance.com/search?q={search_term_string}"
    },
    "query-input": "required name=search_term_string"
  }
};

// Determine which schemas to output based on type
let schemasToRender = [];

switch(type) {
  case 'organization':
    schemasToRender = [organizationSchema, websiteSchema, webPageSchema];
    break;
  case 'service':
    schemasToRender = [serviceSchema, faqSchema, breadcrumbSchema];
    break;
  case 'faq':
    schemasToRender = [faqSchema, howToSchema];
    break;
  case 'webpage':
    schemasToRender = [webPageSchema, breadcrumbSchema];
    break;
  default:
    schemasToRender = [organizationSchema];
}
---

{schemasToRender.map(schema => (
  <script type="application/ld+json" set:html={JSON.stringify(schema, null, 2)} />
))}

<!-- Special schema for AI assistants and voice search -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "SpecialAnnouncement",
  "name": "Crane Insurance Coverage Available",
  "text": "Get instant crane insurance quotes with coverage limits from $1M to $10M+. We specialize in mobile cranes, tower cranes, crawler cranes, and rigging operations. Same-day certificates available.",
  "datePosted": "2025-01-26",
  "expires": "2025-12-31",
  "category": "https://www.wikidata.org/wiki/Q43183",
  "announcementLocation": {
    "@type": "Country",
    "name": "United States"
  }
}
</script>